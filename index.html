<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>üíù untuk mantan tersayang ‚Ä¢ valentine üíù</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Font Jepang / Anime style */
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Comic+Neue:wght@400;700&display=swap');

    body {
      background: #fee5f0;
      background-image: 
        radial-gradient(circle at 10% 20%, #ffd9e8 15%, transparent 30%),
        radial-gradient(circle at 90% 40%, #ffe0f0 20%, transparent 35%),
        radial-gradient(circle at 30% 80%, #ffcce6 25%, transparent 40%),
        repeating-linear-gradient(45deg, rgba(255, 200, 230, 0.4) 0px, rgba(255, 200, 230, 0.4) 10px, rgba(255, 220, 240, 0.4) 10px, rgba(255, 220, 240, 0.4) 20px);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Poppins', 'Comic Neue', cursive;
      padding: 12px;
      position: relative;
      overflow-x: hidden;
    }

    /* ===== FLOATING CHARACTERS ===== */
    .float-char {
      position: fixed;
      font-size: 3.5rem;
      filter: drop-shadow(0 10px 15px rgba(255, 100, 150, 0.3));
      z-index: 5;
      pointer-events: none;
      animation: floatBounce 4s infinite alternate;
    }

    @keyframes floatBounce {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(-25px) rotate(10deg); }
    }

    .float-char2 {
      animation: floatWiggle 5s infinite alternate;
    }

    @keyframes floatWiggle {
      0% { transform: translateX(0) rotate(-5deg); }
      100% { transform: translateX(20px) rotate(15deg); }
    }

    .float-char3 {
      animation: floatSpin 7s infinite linear;
    }

    @keyframes floatSpin {
      0% { transform: rotate(0deg) scale(1); }
      50% { transform: rotate(180deg) scale(1.2); }
      100% { transform: rotate(360deg) scale(1); }
    }

    /* ===== MAIN CARD ===== */
    .love-card {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-radius: 120px 120px 120px 120px;
      box-shadow: 
        0 30px 50px -15px #ff99c0,
        0 0 0 8px #ffffff,
        0 0 0 15px #ffccdd,
        0 20px 0 #d48cab;
      width: 100%;
      max-width: 820px;
      padding: 50px 40px;
      position: relative;
      z-index: 30;
      border: 6px dotted #ffb8d2;
      transition: all 0.3s ease;
    }

    .love-card:hover {
      transform: scale(1.02) translateY(-5px);
      box-shadow: 
        0 40px 60px -15px #ff80b0,
        0 0 0 8px #ffffff,
        0 0 0 18px #ffe0f0,
        0 25px 0 #bf7c9c;
    }

    /* ===== HEADER ===== */
    .love-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 25px;
      background: #ffecf2;
      padding: 15px 25px;
      border-radius: 200px;
      border: 5px solid white;
      box-shadow: 0 8px 0 #f5b8cc;
    }

    .header-icon {
      font-size: 3.5rem;
      filter: drop-shadow(0 8px 6px #ffa5c2);
      animation: iconBounce 2s infinite;
    }

    @keyframes iconBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .header-title {
      font-family: 'Poppins', sans-serif;
      font-weight: 800;
      font-size: 2.5rem;
      background: linear-gradient(135deg, #ff4d7a, #ff85a8, #ffb3c6);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 3px 3px 0 #fff0f5;
      letter-spacing: 1px;
    }

    /* ===== BUBBLE ===== */
    .love-bubble {
      background: #fff9fe;
      border-radius: 80px 80px 80px 30px;
      padding: 35px 35px;
      border: 6px solid white;
      box-shadow: 0 15px 0 #ffb8d0, 0 20px 30px #ffbdd5;
      margin: 25px 0;
      font-size: 1.4rem;
      line-height: 1.8;
      position: relative;
    }

    .love-bubble::before {
      content: "ü•∫üíï";
      position: absolute;
      bottom: -25px;
      left: 30px;
      font-size: 2.8rem;
      filter: drop-shadow(0 5px 5px #ffa5c0);
      animation: emoteFloat 3s infinite;
    }

    @keyframes emoteFloat {
      0%, 100% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.2) rotate(10deg); }
    }

    /* ===== BUTTON ===== */
    .love-btn {
      background: #ffb3cb;
      border: none;
      color: #442f3c;
      font-weight: 700;
      padding: 18px 45px;
      border-radius: 200px;
      font-size: 1.6rem;
      font-family: 'Poppins', sans-serif;
      box-shadow: 0 15px 0 #b57e99, 0 15px 30px #ff9fc0;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.2, 0.9, 0.4, 1.4);
      border: 5px solid white;
      position: relative;
      overflow: visible;
      font-weight: 700;
    }

    .love-btn::after {
      content: "‚ú®";
      position: absolute;
      top: -15px;
      right: -15px;
      font-size: 2.2rem;
      opacity: 0;
      transition: all 0.3s;
      filter: drop-shadow(0 0 5px gold);
    }

    .love-btn:hover::after {
      opacity: 1;
      transform: rotate(20deg) scale(1.3);
    }

    .love-btn:hover {
      transform: translateY(-10px) scale(1.08);
      box-shadow: 0 22px 0 #9d6d88, 0 25px 40px #ff84b0;
      background: #ffcbe0;
    }

    .love-btn:active {
      transform: translateY(5px);
      box-shadow: 0 8px 0 #7e556e;
    }

    /* ===== HEART GALLERY ===== */
    .heart-gallery {
      display: flex;
      gap: 30px;
      justify-content: center;
      margin: 35px 0;
      flex-wrap: wrap;
    }

    .heart-glow {
      font-size: 6rem;
      cursor: pointer;
      filter: drop-shadow(0 15px 15px #ff94b6);
      transition: all 0.4s cubic-bezier(0.2, 0.9, 0.4, 1.3);
      animation: heartFloat 3s infinite alternate;
    }

    @keyframes heartFloat {
      0% { transform: scale(1) rotate(-5deg) translateY(0); }
      100% { transform: scale(1.2) rotate(10deg) translateY(-15px); }
    }

    .heart-glow:hover {
      transform: scale(1.5) rotate(15deg) !important;
      filter: drop-shadow(0 25px 25px #ff6f9f);
    }

    .heart-glow.selected {
      animation: heartPop 0.6s cubic-bezier(0.2, 0.9, 0.3, 1.5);
    }

    @keyframes heartPop {
      0% { transform: scale(1); }
      40% { transform: scale(1.8); }
      70% { transform: scale(1.2); }
      100% { transform: scale(1.1); }
    }

    /* ===== ARENA ===== */
    .game-arena {
      position: relative;
      min-height: 450px;
      background: #fff2fa;
      border-radius: 150px 150px 80px 80px;
      padding: 25px;
      margin: 30px 0;
      border: 8px dashed #ffbed6;
      box-shadow: 0 15px 0 #f0b0c8, inset 0 0 30px #ffe2f0;
    }

    .game-choice {
      padding: 24px 40px;
      border-radius: 200px;
      font-weight: 800;
      font-size: 2rem;
      text-align: center;
      box-shadow: 0 20px 0 #b88ba5, 0 25px 40px #ffb0cb;
      border: 6px solid white;
      width: fit-content;
      min-width: 320px;
      position: absolute;
      z-index: 50;
      font-family: 'Poppins', sans-serif;
      letter-spacing: 1px;
      transition: all 0.4s cubic-bezier(0.2, 0.9, 0.3, 1.2);
      backdrop-filter: blur(5px);
    }

    .game-choice.friend-choice {
      background: #ffdbdb;
      color: #663f4c;
    }

    .game-choice.lover-choice {
      background: #ffd0e6;
      color: #682d4b;
      box-shadow: 0 22px 0 #cd94b2;
    }

    /* friend runaway - tidak bisa diklik saat lari */
    .game-choice.friend-choice.running {
      transition: all 0.4s cubic-bezier(0.3, 1.4, 0.5, 1.2);
      pointer-events: none;
      opacity: 0.95;
    }

    .game-choice.friend-choice.clickable {
      cursor: pointer;
    }

    /* lover super grow */
    .game-choice.lover-choice:hover {
      transform: scale(1.6) translateY(-20px) rotate(5deg);
      background: #ffe7f5;
      box-shadow: 0 35px 0 #ad7b9b, 0 40px 60px #ff8fb8;
    }

    /* ===== MESSAGE ===== */
    .message-panel {
      background: #fff5fb;
      border-radius: 120px;
      padding: 30px 35px;
      margin: 25px 0;
      font-size: 1.7rem;
      text-align: center;
      font-weight: 600;
      border: 6px solid white;
      box-shadow: 0 12px 0 #ffbfd3, inset 0 0 20px #ffe6f0;
      min-height: 130px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ===== LOVE LETTER ===== */
    .love-letter {
      background: #fff2fb;
      border-radius: 120px 120px 120px 40px;
      padding: 55px 45px;
      margin: 35px 0;
      border: 8px solid white;
      box-shadow: 0 25px 0 #f2b9d2, 0 35px 60px #ffb5cf;
      font-size: 1.5rem;
      line-height: 2.1;
      position: relative;
    }

    .love-letter::after {
      content: "üíñüêª‚Äç‚ùÑÔ∏èüå∏";
      position: absolute;
      bottom: -30px;
      right: 40px;
      font-size: 3rem;
      filter: drop-shadow(0 8px 10px #ffb0c8);
      animation: letterFloat 5s infinite;
    }

    @keyframes letterFloat {
      0%, 100% { transform: rotate(0deg) translateY(0); }
      25% { transform: rotate(5deg) translateY(-10px); }
      75% { transform: rotate(-5deg) translateY(10px); }
    }

    /* ===== ANIME EYES ===== */
    .anime-eyes {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin: 20px 0;
    }

    .eye {
      width: 50px;
      height: 50px;
      background: white;
      border-radius: 50%;
      position: relative;
      border: 4px solid #442f3c;
      animation: eyeBlink 3s infinite;
    }

    .eye::after {
      content: "";
      width: 25px;
      height: 25px;
      background: #442f3c;
      border-radius: 50%;
      position: absolute;
      top: 8px;
      left: 8px;
      animation: eyeMove 4s infinite alternate;
    }

    @keyframes eyeBlink {
      0%, 95%, 100% { transform: scaleY(1); }
      96%, 99% { transform: scaleY(0.1); }
    }

    @keyframes eyeMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(5px, 5px); }
    }

    /* ===== PAGE TRANSITION ===== */
    .page-love {
      display: none;
      animation: pageEnter 0.7s cubic-bezier(0.2, 0.9, 0.3, 1.2);
    }

    .page-love.active {
      display: block;
    }

    @keyframes pageEnter {
      0% { opacity: 0; transform: scale(0.9) translateY(30px) rotate(-2deg); }
      100% { opacity: 1; transform: scale(1) translateY(0) rotate(0); }
    }

    /* ===== RAINBOW ===== */
    .rainbow-text {
      background: linear-gradient(90deg, #ff6b6b, #ff9e7a, #ffd966, #a0d6a0, #7fb9ff, #c27eff, #ff99cc);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-weight: 800;
      background-size: 400% auto;
      animation: rainbowMove 8s linear infinite;
    }

    @keyframes rainbowMove {
      0% { background-position: 0% center; }
      100% { background-position: 200% center; }
    }

    /* ===== DECOR ===== */
    .deco-sticker {
      position: absolute;
      font-size: 3.2rem;
      filter: drop-shadow(0 8px 8px #ffb0c0);
      z-index: 40;
      animation: stickerFloat 6s infinite alternate;
    }

    @keyframes stickerFloat {
      0% { transform: translateY(0) rotate(0deg); }
      100% { transform: translateY(-20px) rotate(15deg); }
    }

    .sticker-2 {
      animation: stickerSpin 7s infinite alternate;
    }

    @keyframes stickerSpin {
      0% { transform: rotate(0deg) scale(1); }
      100% { transform: rotate(20deg) scale(1.2); }
    }

    /* ===== BLUSH ===== */
    .blush {
      width: 20px;
      height: 20px;
      background: #ff9eb5;
      border-radius: 50%;
      filter: blur(4px);
      display: inline-block;
      margin: 0 5px;
      opacity: 0.7;
      animation: blushPulse 2s infinite;
    }

    @keyframes blushPulse {
      0%, 100% { opacity: 0.5; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.2); }
    }

    @media (max-width: 650px) {
      .love-card { padding: 30px 20px; }
      .header-title { font-size: 2rem; }
      .game-choice { font-size: 1.5rem; min-width: 250px; padding: 18px 25px; }
      .heart-glow { font-size: 4.5rem; }
    }
  </style>
</head>
<body>
  <!-- ===== FLOATING CHARACTERS ===== -->
  <div class="float-char" style="top: 5%; left: 2%;">ü•∫</div>
  <div class="float-char float-char2" style="top: 15%; right: 3%;">üå∏</div>
  <div class="float-char float-char3" style="bottom: 10%; left: 4%;">üêª‚Äç‚ùÑÔ∏è</div>
  <div class="float-char float-char2" style="bottom: 20%; right: 5%;">‚ú®</div>
  <div class="float-char" style="top: 40%; left: 6%;">üíï</div>
  <div class="float-char float-char3" style="top: 70%; right: 6%;">üêº</div>

  <!-- ===== STICKERS ===== -->
  <div class="deco-sticker" style="top: 8%; right: 8%;">üç°</div>
  <div class="deco-sticker sticker-2" style="bottom: 15%; left: 8%;">üéÄ</div>
  <div class="deco-sticker" style="top: 25%; left: 5%;">üíÆ</div>

  <!-- ===== MAIN CARD ===== -->
  <main class="love-card">
    <!-- PAGE 1 - OPENING -->
    <div id="page1" class="page-love active">
      <div class="love-header">
        <span class="header-icon">ü•∫</span>
        <span class="header-title">UNTUK MANTAN</span>
        <span class="header-icon">üå∏</span>
      </div>
      
      <div style="text-align: center;">
        <h1 style="font-size: 3.2rem; font-weight: 800; color: #ff5f8f; text-shadow: 4px 4px 0 #fff0f5;">Hai, Kamu</h1>
        <h2 style="font-size: 2rem; color: #b24f73; margin-bottom: 20px;">yang masih aku sayang ‚ú®</h2>
        
        <!-- Anime eyes -->
        <div class="anime-eyes">
          <div class="eye"></div>
          <div class="eye"></div>
        </div>
        <div style="display: flex; justify-content: center; gap: 20px; margin: 10px 0 20px;">
          <span class="blush"></span>
          <span class="blush"></span>
        </div>
        
        <div style="margin: 30px auto; width: 180px; height: 180px; background: #ffe8f0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 7rem; border: 8px solid white; box-shadow: 0 20px 0 #ffa5c2, 0 25px 40px #ffacc8;">
          ü•π
        </div>

        <button class="love-btn" id="openBtn">‚ú® BUKA PESAN ‚ú®</button>
        <p style="margin-top: 25px; font-size: 1.4rem; color: #c45a84;">(untuk mantan tersayang)</p>
      </div>
    </div>

    <!-- PAGE 2 - APOLOGY + VALENTINE -->
    <div id="page2" class="page-love">
      <div class="love-bubble">
        <div class="love-header" style="justify-content: flex-start; background: none; box-shadow: none; padding: 0;">
          <span class="header-icon">üì¨</span>
          <span style="font-size: 2rem; font-weight: 700;">surat maaf</span>
        </div>
        
        <p>
          Aku tahu... aku pernah bikin kamu sedih. üòî<br>
          <span style="display: block; text-align: center; font-size: 2.8rem; margin: 15px 0; background: #ffd9e8; border-radius: 200px; padding: 10px;">„Åî„ÇÅ„Çì„Å≠</span>
          Aku nggak mau nyari alasan. Kamu ngajarin aku artinya tulus.
        </p>
        <p style="margin-top: 20px;">
          üå∑ <span style="font-size: 2rem;">Happy Valentine's Day!</span> üå∑<br>
          Kamu tetaplah orang terindah yang pernah aku kenal.
        </p>
        <div style="text-align: right;">
          <button class="love-btn" id="toPage3Btn">lanjut ‚Üí</button>
        </div>
      </div>
    </div>

    <!-- PAGE 3 - INTERACTIVE ZONE -->
    <div id="page3" class="page-love">
      <h2 style="text-align: center; font-weight: 800; font-size: 2.5rem; color: #ff7ba3;">üéÆ GAME LUCU üéÆ</h2>
      
      <div class="love-bubble" style="background: #fff7fd;">
        <p style="text-align: center; font-size: 1.8rem;">pilih hati dulu ‚¨áÔ∏è</p>

        <div class="heart-gallery">
          <span class="heart-glow" id="heartRed">‚ù§Ô∏è</span>
          <span class="heart-glow" id="heartPink">ü©∑</span>
          <span class="heart-glow" id="heartPurple">üíú</span>
          <span class="heart-glow" id="heartBlue">üíô</span>
        </div>

        <div class="message-panel" id="heartMessage">
          ‚ãÜÔΩ°¬∞‚ú© pilih satu hati
        </div>

        <div id="gameArena" class="game-arena" style="display: none;"></div>

        <div class="message-panel" id="finalMessage"></div>

        <div style="text-align: center;">
          <button class="love-btn" id="toPage4Btn" style="display: none;">surat panjang üíå</button>
        </div>
      </div>
    </div>

    <!-- PAGE 4 - LONG LOVE LETTER -->
    <div id="page4" class="page-love">
      <div class="love-letter">
        <div class="love-header">
          <span class="header-icon">üíå</span>
          <span class="header-title">UNTUK MANTAN</span>
          <span class="header-icon">üêº</span>
        </div>
        
        <h2 style="text-align: center; margin: 20px 0;">yang dulu pernah aku sakiti,</h2>
        
        <p>
          Aku udah mikir lama. Bukan cuma karena Valentine, tapi karena aku sadar sesuatu...
        </p>
        
        <p style="font-size: 2.2rem; text-align: center; margin: 25px 0;">
          <span class="rainbow-text">"Aku masih sayang kamu."</span>
        </p>
        <p style="font-size: 1.8rem; text-align: center; margin-bottom: 25px;">(Â§ßÂ•Ω„Åç„Å†„Çà)</p>
        
        <p>
          Setiap lihat karakter lucu, aku inget kamu. Setiap denger lagu yang dulu sering kita denger, kamu yang muncul di kepala. Setiap malam minggu, aku selalu ingat senyummu.
        </p>
        
        <div style="display: flex; justify-content: center; gap: 10px; margin: 30px 0;">
          <span class="blush"></span>
          <span style="font-size: 2rem;">üç°</span>
          <span class="blush"></span>
        </div>
        
        <p style="background: #ffe8f2; padding: 20px; border-radius: 80px; text-align: center; font-size: 2rem; margin: 30px 0; font-weight: 800;">
          üå∏ Mau kita coba lagi? üå∏
        </p>
        
        <p>
          Aku janji, kali ini aku bakal jaga kamu dengan sepenuh hati. Nggak akan aku ulangi kesalahan yang sama. Kamu itu hadiah terindah yang pernah aku miliki, dan aku bodoh karena pernah menyia-nyiakannya.
        </p>
        
        <p>
          Tapi aku percaya, setiap orang berhak dapat kesempatan kedua. Dan aku mohon, beri aku kesempatan itu.
        </p>
        
        <div style="display: flex; justify-content: center; gap: 20px; margin: 20px 0;">
          <span style="font-size: 2rem;">ü•∫</span>
          <span style="font-size: 2rem;">üíï</span>
          <span style="font-size: 2rem;">üå∏</span>
        </div>
        
        <p style="text-align: right; font-size: 1.8rem; margin-top: 30px;">‚Äî dari mantan yang nggak bisa lupain kamu</p>
      </div>
      
      <div style="text-align: center;">
        <button class="love-btn" id="restartBtn">baca ulang ‚Ü∫</button>
      </div>
      <div style="margin-top: 30px; text-align: center; font-size: 1.5rem; color: #ba6787;">
        üíï apa pun jawabanmu, arigatou gozaimasu üíï
      </div>
    </div>
  </main>

  <script>
    (function() {
      const page1 = document.getElementById('page1');
      const page2 = document.getElementById('page2');
      const page3 = document.getElementById('page3');
      const page4 = document.getElementById('page4');
      
      const openBtn = document.getElementById('openBtn');
      const toPage3Btn = document.getElementById('toPage3Btn');
      const toPage4Btn = document.getElementById('toPage4Btn');
      const restartBtn = document.getElementById('restartBtn');

      const hearts = [
        document.getElementById('heartRed'),
        document.getElementById('heartPink'),
        document.getElementById('heartPurple'),
        document.getElementById('heartBlue')
      ];
      
      const heartMessage = document.getElementById('heartMessage');
      const gameArena = document.getElementById('gameArena');
      const finalMessage = document.getElementById('finalMessage');
      const nextBtn = document.getElementById('toPage4Btn');

      let heartPicked = false;
      let choiceMade = false;
      let friendBtn, loverBtn;

      function showPage(page) {
        [page1, page2, page3, page4].forEach(p => p.classList.remove('active'));
        page.classList.add('active');
      }

      function createButtons() {
        gameArena.innerHTML = '';

        const friend = document.createElement('div');
        friend.className = 'game-choice friend-choice';
        friend.id = 'friendBtn';
        friend.textContent = 'temenan aja üòê';
        friend.style.left = '30px';
        friend.style.top = '50px';

        const lover = document.createElement('div');
        lover.className = 'game-choice lover-choice';
        lover.id = 'loverBtn';
        lover.textContent = 'coba lagi üíñ';
        lover.style.right = '30px';
        lover.style.top = '50px';

        gameArena.appendChild(friend);
        gameArena.appendChild(lover);

        return { friend, lover };
      }

      function resetPage3() {
        heartPicked = false;
        choiceMade = false;
        heartMessage.innerHTML = '‚ãÜÔΩ°¬∞‚ú© pilih satu hati';
        gameArena.style.display = 'none';
        finalMessage.innerHTML = '';
        nextBtn.style.display = 'none';
        gameArena.innerHTML = '';
        
        hearts.forEach(h => h.classList.remove('selected'));
      }

      function setupListeners(friend, lover) {
        // ===== FRIEND BUTTON - SUPER RUNAWAY =====
        friend.addEventListener('mouseenter', function(e) {
          if (choiceMade || !heartPicked) return;
          
          this.classList.add('running');
          
          const arenaRect = gameArena.getBoundingClientRect();
          const btnRect = this.getBoundingClientRect();
          
          const maxX = Math.max(0, arenaRect.width - btnRect.width - 40);
          const maxY = Math.max(0, arenaRect.height - btnRect.height - 40);
          
          const randomX = Math.random() * maxX;
          const randomY = Math.random() * maxY;
          
          this.style.left = randomX + 'px';
          this.style.top = randomY + 'px';
          
          // efek liar
          const rotate = (Math.random() * 60) - 30;
          const scale = 0.6 + Math.random() * 0.9;
          this.style.transform = `rotate(${rotate}deg) scale(${scale})`;
          
          // text random
          const texts = [
            'kejar dong üèÉ', 
            'ÈÄÉ„Åí„Çã!', 
            'gak kena üòù', 
            'lari~',
            'coba lagi~',
            'üç° lari terus',
            'üêª‚Äç‚ùÑÔ∏è kejarrr'
          ];
          this.textContent = texts[Math.floor(Math.random() * texts.length)];
        });

        friend.addEventListener('mouseleave', function() {
          if (choiceMade) return;
        });

        friend.addEventListener('click', function() {
          if (choiceMade || !heartPicked) return;
          
          if (this.classList.contains('running')) return;
          
          choiceMade = true;
          
          finalMessage.innerHTML = 'ü§ù berhasil ngeklik! berarti kita emang temenan. oke deh, aku hargai.';
          gameArena.style.display = 'none';
          nextBtn.style.display = 'inline-block';
          heartMessage.innerHTML = 'ü•π makasih sudah jujur.';
        });

        // ===== LOVER BUTTON =====
        lover.addEventListener('mouseenter', function() {
          if (choiceMade || !heartPicked) return;
          
          this.style.transform = 'scale(1.7) translateY(-25px) rotate(5deg)';
          this.style.background = '#ffecf7';
          this.style.boxShadow = '0 40px 0 #b285a4, 0 45px 70px #ff8eb8';
        });

        lover.addEventListener('mouseleave', function() {
          if (choiceMade) return;
          this.style.transform = '';
          this.style.background = '';
          this.style.boxShadow = '';
        });

        lover.addEventListener('click', function() {
          if (choiceMade || !heartPicked) return;
          choiceMade = true;
          
          finalMessage.innerHTML = 'üíñüíñ „ÇÑ„Å£„Åü! makasih udah milih! aku janji jadi lebih baik!';
          gameArena.style.display = 'none';
          nextBtn.style.display = 'inline-block';
          heartMessage.innerHTML = '‚ú®‚ú® hatiku melompat! ‚ú®‚ú®';
        });
      }

      function handleHeartSelect(heart, emoji) {
        if (heartPicked) return;
        heartPicked = true;
        
        heart.classList.add('selected');
        setTimeout(() => heart.classList.remove('selected'), 600);
        
        heartMessage.innerHTML = `kamu pilih ${emoji}! ayo tangkap tombol lari atau pencet tombol besar! ‚¨áÔ∏è`;
        
        gameArena.style.display = 'block';
        const { friend, lover } = createButtons();
        
        friend.classList.add('clickable');
        
        setupListeners(friend, lover);
      }

      hearts.forEach((heart, index) => {
        const emojis = ['‚ù§Ô∏è', 'ü©∑', 'üíú', 'üíô'];
        heart.addEventListener('click', () => handleHeartSelect(heart, emojis[index]));
      });

      openBtn.addEventListener('click', () => showPage(page2));
      
      toPage3Btn.addEventListener('click', () => {
        resetPage3();
        showPage(page3);
      });

      toPage4Btn.addEventListener('click', () => showPage(page4));

      restartBtn.addEventListener('click', () => {
        resetPage3();
        showPage(page1);
      });

    })();
  </script>
</body>
</html>
